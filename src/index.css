* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html,
body,
#root {
  height: 100%;
}

body {
  background-color: rgb(161, 197, 250);
}

#root {
  display: flex;
  justify-content: center;
  align-items: center;

  padding: 2rem;
}

.container {
  width: 100%;
  height: 100%;

  max-width: 1000px;
  margin: 0 auto;

  display: flex;
  justify-content: flex-start;
  flex-direction: column;
}

.map {
  max-width: 900px;
  flex: 1;
  margin-bottom: 5rem;
}

.level-progression {
  position: relative;
  max-width: 400px;
  width: 100%;
  border: 6px solid #9c9c9c;
  border-radius: 8px;

  background-color: black;

  margin-left: auto;
  padding: 0.25rem;

  height: 40px;
}

.game-container {
  display: flex;
  justify-content: center;
  align-items: flex-start;

  gap: 2rem;
}

.flag-container {
  height: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.flag {
  transform: translate(-32%, -30%) rotate(20deg);
  max-width: 50px;
}

.progression {
  top: -100%;
  position: relative;
  width: 100%;
  height: 100%;

  display: flex;

  margin-left: auto;

  background: #91ff85;
  background: linear-gradient(
    180deg,
    rgba(145, 255, 133, 1) 0%,
    rgba(0, 199, 17, 1) 50%,
    rgba(8, 166, 21, 1) 100%
  );
}

.row {
  display: flex;
}

.cell {
  display: flex;
  justify-content: center;
  align-items: center;

  flex: 1;
  max-width: 100px;
  height: 100px;

  cursor: pointer;

  background-color: rgb(21, 218, 37);

  border: 1px solid #00000015;

  position: relative;
}

.cell:hover {
  background-color: rgb(11, 189, 26);
}

.controls {
  display: flex;
  justify-content: center;

  margin-bottom: 1rem;
}

button {
  height: 40px;
  cursor: pointer;

  padding: 0 2rem;

  font-size: 1.5rem;
  font-family: "Gill Sans", "Gill Sans MT", Calibri, "Trebuchet MS", sans-serif;
}

.entity {
  width: 100%;
  position: relative;
  z-index: 99;

  padding: 0.5rem;
}

.entity.bullet {
  max-width: 40px;
  position: absolute;

  transform: translate(-50%, -50%);
  animation: bullet linear infinite;
}

.entity.bullet.first-appear {
  left: 80%;

  animation: bullet-first-render linear infinite;
}

@keyframes bullet-first-render {
  0% {
    left: 80%;
  }

  100% {
    left: 100%;
  }
}

@keyframes bullet {
  0% {
    left: 0%;
  }

  100% {
    left: 100%;
  }
}

.entity.plant {
  max-width: 75px;
  transform-origin: 50% 100%;

  --sway-deg: 1.3deg;
  --sway-amp: 2%;
  --sway-dur: 1400ms;

  animation: plant-sway var(--sway-dur) ease-in-out infinite;
}

.entity.plant.walking.hurting {
  animation: plant-sway var(--sway-dur) ease-in-out infinite,
    plant-hurting 1000ms linear infinite;
}

@keyframes plant-hurting {
  0%,
  50% {
    opacity: 1;
  }
  25% {
    opacity: 0.6;
  }
}

@keyframes plant-sway {
  0%,
  100% {
    transform: translateY(0) rotate(0deg);
  }
  25% {
    transform: translateY(calc(var(--sway-amp) * -0.5)) rotate(var(--sway-deg));
  }
  50% {
    transform: translateY(calc(var(--sway-amp) * -1)) rotate(0deg);
  }
  75% {
    transform: translateY(calc(var(--sway-amp) * -0.5))
      rotate(calc(var(--sway-deg) * -1));
  }
}

.entity.zombie {
  position: absolute;
  left: 100%;
  transform: translate(-50%, -15%);
  transform-origin: 50% 100%;
  will-change: left, transform, filter;

  --move-dur: 12s;
  --gait-dur: 450ms;

  animation: march-x var(--move-dur) linear infinite,
    gait var(--gait-dur) cubic-bezier(0.25, 0.8, 0.3, 1) infinite;
}

.entity.zombie.walking.hurting {
  animation: march-x var(--move-dur) linear infinite,
    gait var(--gait-dur) cubic-bezier(0.25, 0.8, 0.3, 1) infinite,
    hurting 50ms linear infinite;
}

.paused {
  animation-play-state: paused !important;
}

.entity.zombie.damaging {
  --damage-dur: 520ms;
  --recoil-px: 6px;
  --squash: 0.94;
  --tint: 1;

  animation: damage var(--damage-dur) cubic-bezier(0.3, 0.7, 0.4, 0.9) infinite;
}

.entity.zombie.damaging.hurting {
  animation: damage var(--damage-dur) cubic-bezier(0.3, 0.7, 0.4, 0.9) infinite,
    hurting 50ms linear infinite;
}

@keyframes hurting {
  0%,
  5% {
    opacity: 1;
  }
  2.5% {
    opacity: 0.6;
  }
}

@keyframes march-x {
  from {
    left: 100%;
  }
  to {
    left: 0%;
  }
}

@keyframes gait {
  0%,
  100% {
    transform: translate(-50%, -15%) rotate(0deg);
  }
  25% {
    transform: translate(-50%, -16.5%) rotate(1.1deg);
  }
  50% {
    transform: translate(-50%, -18%) rotate(0deg);
  }
  75% {
    transform: translate(-50%, -16.5%) rotate(-1.1deg);
  }
}

@keyframes damage {
  0% {
    transform: translate(-50%, -15%) rotate(0deg) scale(1);
    filter: none;
  }
  25% {
    transform: translate(calc(-50% - 2px), -16%) rotate(1deg)
      scale(1.02, var(--squash));
    filter: brightness(1.08) saturate(1.05);
  }
  45% {
    transform: translate(calc(-50% + var(--recoil-px)), -14.5%) rotate(-1.2deg)
      scale(0.98, 1.02);
    filter: brightness(calc(1 + 0.2 * var(--tint))) saturate(1.1);
  }
  70% {
    transform: translate(calc(-50% + 1px), -15.5%) rotate(0.4deg)
      scale(1.01, 0.98);
    filter: brightness(1.03);
  }
  100% {
    transform: translate(-50%, -15%) rotate(0deg) scale(1);
    filter: none;
  }
}

.head-panel {
  display: flex;

  margin-top: 2rem;

  justify-content: space-between;
  align-items: center;

  min-height: 60px;

  margin-bottom: 1rem;
}

.tool-menu {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  gap: 1rem;
}

.tool-plant {
  max-width: 85px;
  height: 50px;

  padding: 1rem;

  padding-top: 0.1rem;

  background-color: rgb(221, 221, 221);

  border-radius: 8px;

  border: 1px solid #00000071;
  overflow: hidden;

  display: flex;
  justify-content: center;
  align-items: flex-start;

  cursor: pointer;
}

.tool-plant.selected {
  outline: 2px solid #964401;
}

.tool-plant:hover {
  background-color: rgb(194, 194, 194);
}

.tool-plant img {
  width: 100%;

  object-fit: cover;
}
